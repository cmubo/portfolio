---
import { containerPadding } from "../../constants/classNames";
import { Image } from "astro:assets";
import ArrowUpRight from "../icons/ArrowUpRight.astro";
import tenatSVG from "../../assets/images/tenat/tenat-logo.svg";
import workpalSVG from "../../assets/images/workpal/workpal-logo.svg";
import goodshipSVG from "../../assets/images/goodship/goodship-logo.svg";

const workItems = [
  {
    modalId: "tenat",
    title: "Tenat.",
    tags: ["Symfony", "Typescript", "Stimulus", "Turbo"],
    description:
      "A fully-integrated tenancy management system designed to transform lettings, real estate and property management. I led the complete frontend build and much of the ux design for this project. The project was built in symfony, the frontend was mainly comprised of custom built components.",
    bgColour: "#E7266A",
    logo: tenatSVG,
    hasImageGallery: true,
  },
  {
    modalId: "workpal",
    title: "Workpal.",
    tags: ["React", "Capacitor", "Mobile App", "Jest", "Cypress"],
    description:
      "Workforce management and staff wellbeing online portal and mobile application. I led the development and management of the project, working closely with another frontend developer. My responsibilities included direct communication with the client, coordination with their internal team, and collaboration with an offshore backend team. ",
    bgColour: "#F9F9FC",
    logo: workpalSVG,
    hasImageGallery: true,
  },
  {
    modalId: "goodship",
    title: "Goodship.",
    tags: ["Webflow"],
    description:
      "GoodShip* is a collaboration agency that offers comprehensive support for our clients and partners. I worked along side Gavin at goodship to build out the site within webflow and also assisted with the design.",
    bgColour: "#FCF2E7",
    logo: goodshipSVG,
    hasImageGalery: false,
    link: "https://www.goodship.agency/",
  },
];
---

<section class={`min-h-[100svh] container mx-auto ${containerPadding} mb-4`}>
  <div class="grid grid-cols-1 gap-12">
    {
      workItems.map((item) => (
        <div class="grid w-full grid-cols-12 items-center gap-4 rounded-2xl border border-dashed p-6 sm:gap-8">
          <div
            class="work__image-container work__bg-tenat relative col-span-12 flex aspect-square items-center justify-center rounded-2xl bg-cover bg-center p-4 sm:col-span-4"
            style={`background-color: ${item.bgColour};`}
          >
            <Image
              src={item.logo}
              alt={`${item.title} logo.}`}
              class="w-full max-w-[200px]"
            />
            {item.hasImageGallery ? (
              <button
                type="button"
                class="work__view-images-button js-gallery-modal-open"
                data-modal-id={item.modalId}
              >
                <span>View</span>{" "}
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="size-4"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"
                  />
                </svg>
              </button>
            ) : null}
          </div>
          <div class="col-span-12 flex h-full flex-col justify-between gap-4 sm:col-span-8 sm:py-6">
            <div class="h-full">
              <div class="mb-4 flex items-center justify-between border-b border-dashed pb-3">
                <h3 class="font-title work__title w-full">{item.title}</h3>

                {item.link ? (
                  <a
                    href={item.link}
                    target="_blank"
                    rel="noreferrer"
                    class="px-4"
                  >
                    <ArrowUpRight className="size-8" />
                  </a>
                ) : (
                  <span />
                )}
              </div>
              <p class="work__content">{item.description}</p>
            </div>
            <div class="flex flex-wrap items-center gap-2 text-xs">
              {item.tags.map((tag) => (
                <span class="rounded-xl border px-2 py-1">{tag}</span>
              ))}
            </div>
          </div>
        </div>
      ))
    }
  </div>
</section>

<style>
  .work__title {
    font-size: clamp(24px, 4vw, 36px);
  }
  .work__content {
    font-size: clamp(14px, 2vw, 18px);
  }

  .work__view-images-button {
    border: 1px solid black;
    position: absolute;
    bottom: 10px;
    right: 10px;
    background-color: rgba(255, 255, 255, 0.25);
    border-radius: 16px;
    backdrop-filter: blur(16px);
    font-size: 12px;
    padding: 4px 12px;
    display: flex;
    gap: 3px;
    align-items: center;
    justify-content: center;
    transition: 0.2s;
    cursor: pointer;
  }

  .work__view-images-button:hover {
    backdrop-filter: blur(0px);
    background-color: #fff;
  }
</style>

<script>
  document
    .querySelectorAll<HTMLButtonElement>(".js-gallery-modal-open")
    .forEach((button) => {
      button.addEventListener("click", () => {
        window.dispatchEvent(
          new CustomEvent("gallery-modal::open", {
            detail: {
              id: button.dataset.modalId,
            },
          }),
        );
      });
    });

  document
    .querySelectorAll<HTMLButtonElement>(".js-gallery-modal-close")
    .forEach((button) => {
      button.addEventListener("click", () => {
        window.dispatchEvent(
          new CustomEvent("gallery-modal::close", {
            detail: {
              id: button.dataset.modalId,
            },
          }),
        );
      });
    });
</script>
